# **Дорожная карта проекта: jCloud (just-nuxt-cloud-full-stack)**

Это дорожная карта развития проекта `just-nuxt-cloud-full-stack` до уровня корпоративной, модульной и масштабируемой облачной платформы хранения данных.

## **Видение и Ключевые Принципы**

**Цель:** Создать надежное, безопасное и гибкое облачное хранилище (SaaS), которое может служить как самостоятельным продуктом, так и ядром для целой экосистемы других сервисов (видеохостинг, хостинг документов, мобильные приложения и т.д.).

**Ключевые принципы:**
1.  **Безопасность превыше всего:** Данные пользователя — наш самый ценный актив. Шифрование на всех этапах является обязательным.
2.  **Абсолютная модульность:** Каждый элемент системы (UI-компонент, API-модуль, фоновая задача) должен быть независимым, переиспользуемым и легко заменяемым.
3.  **API-First подход:** Весь функционал должен быть доступен через хорошо документированный, стабильный и безопасный API.
4.  **Масштабируемость:** Архитектура должна быть готова к горизонтальному масштабированию как на уровне приложения, так и на уровне хранилища данных.

---

## **Этап 1: Укрепление Фундамента и Безопасность**

**Цель:** Превратить текущую базу в защищенную и готовую к коммерческому использованию платформу.

*   **Спринт 1: Комплексное Шифрование**
    *   **Задача 1.1 (Клиентское шифрование):**
        *   **Описание:** Реализовать end-to-end шифрование. Перед загрузкой на сервер файлы шифруются в браузере с помощью ключа, известного только пользователю (например, производного от его пароля). Сервер хранит только зашифрованные "блобы".
        *   **Технологии:** `libsodium.js` или `Web Crypto API`.
        *   **Результат:** Администраторы платформы не имеют технической возможности получить доступ к содержимому файлов пользователей.
    *   **Задача 1.2 (Серверное шифрование):**
        *   **Описание:** Гарантировать, что все данные, хранящиеся в S3-совместимых хранилищах, зашифрованы на стороне сервера (Encryption at Rest).
        *   **Технологии:** Использование встроенных возможностей S3 (SSE-S3, SSE-KMS).
        *   **Результат:** Дополнительный слой защиты на случай несанкционированного физического доступа к дискам хранилища.

*   **Спринт 2: Глубокая Модуляризация**
    *   **Задача 2.1 (UI-Kit):**
        *   **Описание:** Вынести все базовые UI-компоненты (кнопки, модальные окна, инпуты, иконки) в отдельный приватный NPM-пакет или Git-репозиторий (`jcloud-ui-kit`).
        *   **Результат:** Ускорение разработки новых сервисов в экосистеме. Единообразный дизайн во всех продуктах.
    *   **Задача 2.2 (API-модули):**
        *   **Описание:** Рефакторинг серверной части API. Каждый эндпоинт должен быть разделен на логические слои: `Controller` (обработка запроса), `Service` (бизнес-логика), `Repository` (взаимодействие с БД).
        *   **Результат:** Повышение тестируемости и переиспользуемости кода API. Упрощение добавления нового функционала.

---

## **Этап 2: Корпоративные Функции**

**Цель:** Внедрить функционал, необходимый для коммерческого использования и управления большими объемами данных.

*   **Спринт 3: Тарификация и Биллинг**
    *   **Задача 3.1 (Модели данных и Админ-панель):**
        *   **Описание:** Создать в Prisma модели `Tariff` (тарифный план), `Subscription` (подписка пользователя), `Invoice` (счет). Реализовать в админ-панели интерфейс для CRUD-операций с тарифами (указание лимитов хранилища, трафика, доступных функций).
        *   **Результат:** Администраторы могут гибко настраивать тарифные планы.
    *   **Задача 3.2 (Интеграция с платежным шлюзом):**
        *   **Описание:** Разработать в виде отдельного, независимого проекта, тестовый платежный шлюз. Интегрировать `jCloud` с этим шлюзом для управления подписками.
        *   **Результат:** Пользователи могут выбирать тариф и "оплачивать" его, система автоматически применяет ограничения.

*   **Спринт 4: Поддержка Нескольких S3-хранилищ**
    *   **Задача 4.1 (Управление хранилищами):**
        *   **Описание:** Создать модель `S3Storage` для хранения конфигураций (endpoint, credentials, bucket). Реализовать в админ-панели безопасный интерфейс для добавления, редактирования и удаления подключенных S3-хранилищ.
        *   **Результат:** Платформа может одновременно работать с несколькими физическими хранилищами (например, от разных провайдеров или в разных регионах).
    *   **Задача 4.2 (Стратегии распределения):**
        *   **Описание:** Реализовать логику и UI для настройки правил распределения данных:
            *   **Последовательное:** Новые файлы загружаются в первое хранилище, пока оно не заполнится, затем во второе и т.д. (с возможностью задавать порядок).
            *   **Равномерное:** Новые файлы распределяются по всем доступным хранилищам для балансировки нагрузки.
            *   **По клиентам:** Возможность "закрепить" определенное хранилище за конкретным пользователем или группой пользователей (тарифом).
        *   **Результат:** Гибкое управление затратами и производительностью инфраструктуры.
    *   **Задача 4.3 (Миграция данных):**
        *   **Описание:** Создать в админ-панели функционал для запуска фоновой задачи по переносу данных пользователя (или всех данных) из одного S3-хранилища в другое.
        *   **Результат:** Возможность безболезненно менять поставщиков S3 или перераспределять данные.

---

## **Этап 3: Экосистема и API**

**Цель:** Подготовить платформу к интеграции с другими сервисами и внешними разработчиками.

*   **Спринт 5: Публичный API и Документация**
    *   **Задача 5.1 (API-ключи):**
        *   **Описание:** Реализовать для пользователей возможность генерировать API-ключи для программного доступа к своему хранилищу.
        *   **Результат:** `jCloud` можно использовать для автоматизации и в сторонних приложениях.
    *   **Задача 5.2 (Документация):**
        *   **Описание:** Автоматически генерировать документацию для API с использованием `Swagger` или `OpenAPI`.
        *   **Результат:** Упрощение интеграции для сторонних разработчиков и внутренних команд.

*   **Спринт 6: Интеграция с Экосистемой**
    *   **Задача 6.1 (Сервисный аккаунт):**
        *   **Описание:** Создать специальный тип аккаунта "для экосистемы" с максимальным тарифом и особыми правами, который будет использоваться внутренними приложениями (видеохостинг, платежный шлюз и т.д.) для взаимодействия с `jCloud` по API.
        *   **Результат:** Бесшовное и привилегированное взаимодействие между сервисами собственной экосистемы.
    *   **Задача 6.2 (Проект-пример):**
        *   **Описание:** Разработать proof-of-concept (например, простой видеохостинг), который полностью полагается на API `jCloud` для хранения своих файлов.
        *   **Результат:** Демонстрация мощи и гибкости API `jCloud` и подтверждение правильности выбранной архитектуры.